---
title: What the F(#) is Next?
output:
  blogdown::html_page:
    toc: false
    toc_depth: 1
    fig_width: 8
    dev: "svg"
author: "Houston Haynes"
date: '2021-06-02T15:59:43+05:30'
featuredpath: img
featured: fsharp.png
ogfeatured: h3_og_wide_fsharp.png
emblem: perspective.png
description: A winding journey to a more functional path forward in the cloud and on the edge
draft: false
tags:
- F#
- full stack
- mobile
- IoT
categories: 
- Perspective
weight: 1
editor_options: 
  chunk_output_type: inline
---
## An(other) Inflection Point

Spend enough time in technology and you see recurring patterns ebb and flow. The democratization of technology - areas of specialization evolving into commodities - has largely been a net positive. But if you get caught up in the swirl of it you sometimes miss the bigger picture. I did. In my recent pivot to consulting around the analytics domain I hadn't realized the role is essentially solving the *wrong* problem over and again. The pandemic gave me a chance to take a step back from that to assess in a way I hadn't up to this point, and so this post is a bit on the **next** step in my journey.

`r blogdown::shortcode("tweet", "1400817256418840576")`

**SPOILER ALERT:** My response above is the 280 character version of this post - so if you're running short of time that's the tl;dr.

## A Warehouse Full of Cannibals

I mention in other posts on this site that my first software project outside of school was a warehouse management system for a small company `r blogdown::shortcode("url-link", "in its early growth stages", "/vitae/early-years/", "_self")`. We were building physical products "from a cold start" as well as doing refurbishments of vintage electronic music gear. But we were staffing up and had grown beyond the ability for Bob (and myself, ostensibly) to go around with all of the parts and component information as a function of collective memory. The challenge was that with *so many* parts sources - including stripping operational parts out of otherwise-broken systems - meant tracking how much of something we *could* build was a major concern. Most of our work was standard off-the-shelf components but there was *just enough* of the boutique part tracing that it really required its own solution.

We not only had to track the parts we ordered from suppliers, but we also had to calibrate for raw materials and lead time required to fabricate some of our own parts built in-house. And all of this was before we had to start cannibalizing out of a smorgasbord of defunct instruments sitting on the back shelves of the warehouse. In many ways it was a logistics nightmare, but the silver lining is that it was built to eventually include *some* predictive capabilities. Little did I know that it would be the kind of problem I'd be solving over and again for the next few decades.

`r blogdown::shortcode("tweet-single", "1400490914838024196")`

## The Big Event & The Bigger Picture

Inventory management seems pretty mundane - and if you're lucky, it is. *But almost **no one** is so lucky*. There's the many-to-many relationships that emerge: multiple suppliers that can provide the same part, cost versus lead time considerations, it all factors in. And at that time there was no easy online search to find supplier part counts and delivery lead times. You had to get folks on the phone, which takes time and patience. And this system was as much about providing visibility into what's "out there" as what we had on hand. The good news is that once the information was "in the system" then a generalist - an office manager or other line worker - can do a lookup and have a meaningful conversation with nearly anyone in the supply chain. Up to that point, it was either Bob or myself that had to spend time "on the horn" and creating a fan-out for that group of tasks was a pretty sizable force multiplier.

It started with an accounting template, part of what Microsoft's Access plus Visual Basic offering. As I mentioned in my early years with Moog that his son worked at Microsoft and he sent us a beta of the product, and it shaped really well to our problem space. I expanded it in *two* directions - as mentioned we kept notes on sources for off-the-shelf parts, and I *also* built tables for various custom circuit boards and parts we assembled in the shop with the full *bill of materials* (BOM) that each would consume. The "fun" part was coding an optimizer that could give us a view into how many boards we could build before running out of certain key components. So instead of a surprise when looking into a nearly empty bin, we could run checks before setting up for an assembly run to see what we'd need to resupply ahead of time. And beyond the "0 checks" we also used it to show the "shape" that the bins we would be afterward, and provide a view into what we'd need to order to replenish stock before the next run. We had been burned enough times that the investment in a bespoke-ish system was certainly worth the effort. And once we had gotten the primitives in place, the portions the provided the higher level view was an easy add-on.

> It struck me that the folks who build event based systems and the folks who are consumed by byzantine analytics re-platforming ***never talk to each other*** because they're both busy, albeit for different reasons.

My next job was as a developer for an accounting company that provided electronic tax filing software for CPAs. So that wasn't merely dancing around an accounting mindset - this *was* accounting with a twist. We *also* had to deal with a variety of filing regulations with each state, plus US federal tax codes. And there were specific guidelines on how to note a preparer's overrides and all of the amendments and indemnifications that came with it. As it turns out, this was an unexpected early lesson in the winding path my career has taken since then. Here's a 2016 keynote by Greg Young - the person `r blogdown::shortcode("url-link", "who originally coined the term 'CQRS' and founder of EventStore DB", "https://www.eventstore.com/blog/event-sourcing-and-cqrs")`, who sums up the event sourced landscape in this brief excerpt.

`r blogdown::shortcode("youtube2-small", id = '"I3uH3iiiDqY"', yt_start = '"355"', yt_end= '"440"')`

## The 'Wrong' Kind of DDD

But the road to this realization was full of detours. While event sourcing and event-driven systems are often associated with domain driven design (DDD) the next decade or so of my career was subsumed with another DDD - ***database* driven development**. I spent some time with IBM Global Services and managing their partner e-commerce DBs around the globe. And that actually had some event sourcing functions as we were correcting and re-loading data in preparation for Y2K. But when I went to Siebel Systems we built out a lab with more than a dozen application and database based systems to simulate various workloads. That was when DBAs - database *architects* ruled the world. Because databases were often the greatest concentration of compute and storage (and therefore expense) it tended to also be the place where business logic would reside. And as anyone who's led a "digital transformation" project will tell you the industry is still living with that legacy imbalance in enterprise n-tier systems to this day.

## You're Projecting

Fast forward to my first Microsoft Gold Partner assignment, a state level court system data warehousing project. They wanted to have a complete history for all court documents, but the old source system didn't record deletes. Well - to be specific they ***actually removed records*** instead of simply marking them with a 'deleted' indicator in the table. This was a vestige of the *precious* mentality of limited storage and compute available in databases from a bygone era. There had been plenty of opportunities to fix that *omission by subtraction*, but no one went to the trouble to do so in the intervening years. So they assumed that it could be magically *fixed* in the new data warehouse as though the information could be generated out of thin air. I eventually found a hybrid solution which could create a differential from monthly backups, loaded as snapshots for comparison. The re-built record delete indicators were only accurate to the end of the month in which they were deleted, but it was better than nothing. The process was tremendously time-consuming and very expensive, but as I've found over the years most analytics systems are the "later" choice of most *"pay now or pay later"* decision-making processes.

What I found since that time is that most "digital transformation" analytics projects are in-effect recreating event sourcing from legacy operational systems, so that it could *then be **re-projected** into an analytic work product*. I make a passing reference to the inherent fallacy of "digital transformation" in my post about `r blogdown::shortcode("url-link", "agile patterns and practices", "/post/agile-zombie-apocalypse/", "_self")` and this is another facet of the same argument. Here again Greg Young articulates the problem space succinctly.

`r blogdown::shortcode("youtube2-small", id = '"I3uH3iiiDqY"', yt_start = '"3174"', yt_end = '"3224"')`

I don't want this article to preach the gospel of all things event sourced. There are plenty of those around the web. But it struck me that the folks who build event based systems and the folks who are consumed by byzantine analytics re-platforming ***never talk to each other*** because they're both busy, albeit for different reasons. So while Greg's keynote presentation was certainly educational on its own merits - it's also a message in a bottle to folks drowning in technical debt created by others (as I was) when trying to extract analytic value out of legacy operational systems that are fundamentally ill-suited to their task.

## A More Functional Approach

This post is primarily about how my early adventures inadvertently led to a shift to focus to learning F#. But to be fair it's not my first *or even my second* functional-friendly language. With my time at Siebel I picked up java and spent nearly a decade in that "family". While I had done quite a bit of java proper I also wrote quite a bit of production code with Groovy. Much of that time I felt like I was wrestling as much with the JVM as solving business problems. And between that and Spark/Scala later in the analytics phase of my consulting work I really grew frustrated with the java runtime and shifted focus to C#. Like most folks in analytics I dabbled a bit with Python, but found that `r blogdown::shortcode("url-link", "the inherent functional programming (FP) style of R", "https://adv-r.hadley.nz/fp.html")` along with its unique ability to efficiently process large observation records made it a clear choice above Python. So from that time forward I was primarily working in C# or R, and only stepped out to Python when it was already present in Jupyter notebooks or other mixed code environments.

When I took a pause during the pandemic to reconsider my options as a systems architect, I kept stumbling across facets of event sourcing that resonated with functional programming. I thought it might be a form of survivor bias, since I had used a handful of FP languages and really like working with R. But then this last footnote from Greg really brought the point home.

`r blogdown::shortcode("youtube2-small", id = '"I3uH3iiiDqY"', yt_start = '"3226"', yt_end = '"3258"')`

So that settled the matter for me. I wanted to find a general-purpose functional language that had avenues to enable machine learning workloads. I had taken a brief look at F# a few years ago, but it didn't stick. The story wasn't really cohesive, but now with an impressive portfolio of ports to or interop with .NET and the growing meta-programming libraries that support F#, I thought it was time to consider it the *one language to rule them all*, at least for my own designs.

## To The Point

Unlike my prose, F# is succinct. So aside from being able to take advantage of "life in the .NET ecosystem" it also has the ability to pack a great deal of context into a relatively small block of code. I remember being resistant to that idea when going from java "proper" to Groovy, having grown acclimated to the former's more verbose syntax. And I hear similar comments from C# developers being perplexed with the terse structure of F# code. But with my exposure to Python and R, F# felt like the best of all worlds. You get the clarity of a composed structure using static typing with robust type inference and a compiler that really keeps you from going far astray. F# had a high quality REPL long before it was cool, and there is `r blogdown::shortcode("url-link", "hot module reload in the SAFE Stack ", "https://safe-stack.github.io/docs/recipes/developing-and-testing/using-hot-reload/")`with a more general HMR implementation coming to .NET 6 later this year. From the perspective of supporting rapid development, it has the goods.

For an example of F#'s succinct syntax consider this sample from my `r blogdown::shortcode("url-link", "Low Code is Dead. Long Live Low Code!", "/post/low-code-is-dead", "_self")` blog post. The idea is to illustrate how an F# function extrapolates to C# and then the Intermediate Language that the .NET compiler uses to produce machine code. This isn't to say F# is better or worse than any other language, just that it has certain traits that make it advantageous for a direct for of expression.

<button class="btn btn-outline-dark btn-sm mt-2 mb-2" data-toggle="collapse" data-target="#codefsharp">View sample F# Parallel Array Sample</button>
<button class="btn btn-outline-dark btn-sm mt-2 mb-2" data-toggle="collapse" data-target="#codecsharp">View sample code converted to C#</button>
<button class="btn btn-outline-dark btn-sm mt-2 mb-2" data-toggle="collapse" data-target="#codeil">View sample in Intermediate Language</button>

<pre id="codefsharp" class="collapse col-xs-12"><code class="fsharp">module ParallelArrayProgramming =

    let oneBigArray = [| 0 .. 100000 |]

    // do some CPU intensive computation
    let rec computeSomeFunction x =
        if x <= 2 then 1
        else computeSomeFunction (x - 1) + computeSomeFunction (x - 2)

    // Do a parallel map over a large input array
    let computeResults() = oneBigArray |> Array.Parallel.map (fun x -> computeSomeFunction (x % 20))

    printfn "Parallel computation results: %A" (computeResults())</code></pre>

<pre id="codecsharp" class="collapse col-xs-12"><code class="csharp">using System;
using System.Diagnostics;
using System.IO;
using System.Reflection;
using System.Runtime.CompilerServices;
using <StartupCode$_>;
using Microsoft.FSharp.Collections;
using Microsoft.FSharp.Core;

[assembly: FSharpInterfaceDataVersion(2, 0, 0)]
[assembly: AssemblyVersion("0.0.0.0")]
[CompilationMapping(SourceConstructFlags.Module)]
public static class @_
{
    [CompilationMapping(SourceConstructFlags.Module)]
    public static class ParallelArrayProgramming
    {
        [Serializable]
        internal sealed class computeResults@11 : FSharpFunc<int, int>
        {
            [CompilerGenerated]
            [DebuggerNonUserCode]
            internal computeResults@11()
            {
            }

            public override int Invoke(int x)
            {
                return computeSomeFunction(x % 20);
            }
        }

        [CompilationMapping(SourceConstructFlags.Value)]
        public static int[] oneBigArray
        {
            get
            {
                return $_.oneBigArray@3;
            }
        }

        [CompilationMapping(SourceConstructFlags.Value)]
        internal static PrintfFormat<FSharpFunc<int[], Unit>, TextWriter, Unit, Unit> format@1
        {
            get
            {
                return $_.format@1;
            }
        }

        public static int computeSomeFunction(int x)
        {
            if (x <= 2)
            {
                return 1;
            }
            return computeSomeFunction(x - 1) + computeSomeFunction(x - 2);
        }

        public static int[] computeResults()
        {
            return ArrayModule.Parallel.Map(new computeResults@11(), oneBigArray);
        }
    }
}
namespace <StartupCode$_>
{
    internal static class $_
    {
        [DebuggerBrowsable(DebuggerBrowsableState.Never)]
        internal static readonly int[] oneBigArray@3;

        [DebuggerBrowsable(DebuggerBrowsableState.Never)]
        internal static readonly PrintfFormat<FSharpFunc<int[], Unit>, TextWriter, Unit, Unit> format@1;

        [DebuggerBrowsable(DebuggerBrowsableState.Never)]
        [CompilerGenerated]
        [DebuggerNonUserCode]
        internal static int init@;

        static $_()
        {
            oneBigArray@3 = SeqModule.ToArray(Operators.CreateSequence(Operators.OperatorIntrinsics.RangeInt32(0, 1, 100000)));
            format@1 = new PrintfFormat<FSharpFunc<int[], Unit>, TextWriter, Unit, Unit, int[]>("Parallel computation results: %A");
            PrintfModule.PrintFormatLineToTextWriter(Console.Out, @_.ParallelArrayProgramming.format@1).Invoke(@_.ParallelArrayProgramming.computeResults());
        }
    }
}</code></pre>

<pre id="codeil" class="collapse col-xs-12"><code class="">.class private auto ansi '<Module>'
    extends [mscorlib]System.Object
{
} // end of class <Module>

.class public auto ansi abstract sealed _
    extends [mscorlib]System.Object
{
    .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationMappingAttribute::.ctor(valuetype [FSharp.Core]Microsoft.FSharp.Core.SourceConstructFlags) = (
        01 00 07 00 00 00 00 00
    )
    // Nested Types
    .class nested public auto ansi abstract sealed ParallelArrayProgramming
        extends [mscorlib]System.Object
    {
        .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationMappingAttribute::.ctor(valuetype [FSharp.Core]Microsoft.FSharp.Core.SourceConstructFlags) = (
            01 00 07 00 00 00 00 00
        )
        // Nested Types
        .class nested assembly auto ansi sealed serializable beforefieldinit computeResults@11
            extends class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32, valuetype [System.Private.CoreLib]System.Int32>
        {
            // Methods
            .method assembly specialname rtspecialname 
                instance void .ctor () cil managed 
            {
                .custom instance void [System.Private.CoreLib]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
                    01 00 00 00
                )
                .custom instance void [System.Private.CoreLib]System.Diagnostics.DebuggerNonUserCodeAttribute::.ctor() = (
                    01 00 00 00
                )
                // Method begins at RVA 0x2090
                // Code size 7 (0x7)
                .maxstack 8

                IL_0000: ldarg.0
                IL_0001: call instance void class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32, valuetype [System.Private.CoreLib]System.Int32>::.ctor()
                IL_0006: ret
            } // end of method computeResults@11::.ctor

            .method public strict virtual 
                instance valuetype [System.Private.CoreLib]System.Int32 Invoke (
                    valuetype [System.Private.CoreLib]System.Int32 x
                ) cil managed 
            {
                // Method begins at RVA 0x2098
                // Code size 10 (0xa)
                .maxstack 8

                IL_0000: ldarg.1
                IL_0001: ldc.i4.s 20
                IL_0003: rem
                IL_0004: call valuetype [System.Private.CoreLib]System.Int32 _/ParallelArrayProgramming::computeSomeFunction(valuetype [System.Private.CoreLib]System.Int32)
                IL_0009: ret
            } // end of method computeResults@11::Invoke

        } // end of class computeResults@11


        // Methods
        .method public specialname static 
            valuetype [System.Private.CoreLib]System.Int32[] get_oneBigArray () cil managed 
        {
            // Method begins at RVA 0x2050
            // Code size 6 (0x6)
            .maxstack 8

            IL_0000: ldsfld valuetype [System.Private.CoreLib]System.Int32[] '<StartupCode$_>.$_'::oneBigArray@3
            IL_0005: ret
        } // end of method ParallelArrayProgramming::get_oneBigArray

        .method public static 
            valuetype [System.Private.CoreLib]System.Int32 computeSomeFunction (
                valuetype [System.Private.CoreLib]System.Int32 x
            ) cil managed 
        {
            // Method begins at RVA 0x2058
            // Code size 24 (0x18)
            .maxstack 8

            IL_0000: ldarg.0
            IL_0001: ldc.i4.2
            IL_0002: bgt.s IL_0006

            IL_0004: ldc.i4.1
            IL_0005: ret

            IL_0006: ldarg.0
            IL_0007: ldc.i4.1
            IL_0008: sub
            IL_0009: call valuetype [System.Private.CoreLib]System.Int32 _/ParallelArrayProgramming::computeSomeFunction(valuetype [System.Private.CoreLib]System.Int32)
            IL_000e: ldarg.0
            IL_000f: ldc.i4.2
            IL_0010: sub
            IL_0011: call valuetype [System.Private.CoreLib]System.Int32 _/ParallelArrayProgramming::computeSomeFunction(valuetype [System.Private.CoreLib]System.Int32)
            IL_0016: add
            IL_0017: ret
        } // end of method ParallelArrayProgramming::computeSomeFunction

        .method public static 
            valuetype [System.Private.CoreLib]System.Int32[] computeResults () cil managed 
        {
            // Method begins at RVA 0x2074
            // Code size 18 (0x12)
            .maxstack 8

            IL_0000: newobj instance void _/ParallelArrayProgramming/computeResults@11::.ctor()
            IL_0005: call valuetype [System.Private.CoreLib]System.Int32[] _/ParallelArrayProgramming::get_oneBigArray()
            IL_000a: tail.
            IL_000c: call !!1[] [FSharp.Core]Microsoft.FSharp.Collections.ArrayModule/Parallel::Map<valuetype [System.Private.CoreLib]System.Int32, valuetype [System.Private.CoreLib]System.Int32>(class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<!!0, !!1>, !!0[])
            IL_0011: ret
        } // end of method ParallelArrayProgramming::computeResults

        .method assembly specialname static 
            class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit> get_format@1 () cil managed 
        {
            // Method begins at RVA 0x2088
            // Code size 6 (0x6)
            .maxstack 8

            IL_0000: ldsfld class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit> '<StartupCode$_>.$_'::format@1
            IL_0005: ret
        } // end of method ParallelArrayProgramming::get_format@1

        // Properties
        .property valuetype [System.Private.CoreLib]System.Int32[] oneBigArray()
        {
            .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationMappingAttribute::.ctor(valuetype [FSharp.Core]Microsoft.FSharp.Core.SourceConstructFlags) = (
                01 00 09 00 00 00 00 00
            )
            .get valuetype [System.Private.CoreLib]System.Int32[] _/ParallelArrayProgramming::get_oneBigArray()
        }
        .property class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit> format@1()
        {
            .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationMappingAttribute::.ctor(valuetype [FSharp.Core]Microsoft.FSharp.Core.SourceConstructFlags) = (
                01 00 09 00 00 00 00 00
            )
            .get class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit> _/ParallelArrayProgramming::get_format@1()
        }

    } // end of class ParallelArrayProgramming


} // end of class _

.class private auto ansi abstract sealed '<StartupCode$_>.$_'
    extends [mscorlib]System.Object
{
    // Fields
    .field assembly static initonly valuetype [System.Private.CoreLib]System.Int32[] oneBigArray@3
    .custom instance void [System.Private.CoreLib]System.Diagnostics.DebuggerBrowsableAttribute::.ctor(valuetype [System.Private.CoreLib]System.Diagnostics.DebuggerBrowsableState) = (
        01 00 00 00 00 00 00 00
    )
    .field assembly static initonly class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit> format@1
    .custom instance void [System.Private.CoreLib]System.Diagnostics.DebuggerBrowsableAttribute::.ctor(valuetype [System.Private.CoreLib]System.Diagnostics.DebuggerBrowsableState) = (
        01 00 00 00 00 00 00 00
    )
    .field assembly static int32 init@
    .custom instance void [System.Private.CoreLib]System.Diagnostics.DebuggerBrowsableAttribute::.ctor(valuetype [System.Private.CoreLib]System.Diagnostics.DebuggerBrowsableState) = (
        01 00 00 00 00 00 00 00
    )
    .custom instance void [System.Private.CoreLib]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Private.CoreLib]System.Diagnostics.DebuggerNonUserCodeAttribute::.ctor() = (
        01 00 00 00
    )

    // Methods
    .method private specialname rtspecialname static 
        void .cctor () cil managed 
    {
        // Method begins at RVA 0x20a4
        // Code size 69 (0x45)
        .maxstack 5

        IL_0000: ldc.i4.0
        IL_0001: ldc.i4.1
        IL_0002: ldc.i4 100000
        IL_0007: call class [System.Private.CoreLib]System.Collections.Generic.IEnumerable`1<valuetype [System.Private.CoreLib]System.Int32> [FSharp.Core]Microsoft.FSharp.Core.Operators/OperatorIntrinsics::RangeInt32(valuetype [System.Private.CoreLib]System.Int32, valuetype [System.Private.CoreLib]System.Int32, valuetype [System.Private.CoreLib]System.Int32)
        IL_000c: call class [System.Private.CoreLib]System.Collections.Generic.IEnumerable`1<!!0> [FSharp.Core]Microsoft.FSharp.Core.Operators::CreateSequence<valuetype [System.Private.CoreLib]System.Int32>(class [System.Private.CoreLib]System.Collections.Generic.IEnumerable`1<!!0>)
        IL_0011: call !!0[] [FSharp.Core]Microsoft.FSharp.Collections.SeqModule::ToArray<valuetype [System.Private.CoreLib]System.Int32>(class [System.Private.CoreLib]System.Collections.Generic.IEnumerable`1<!!0>)
        IL_0016: stsfld valuetype [System.Private.CoreLib]System.Int32[] '<StartupCode$_>.$_'::oneBigArray@3
        IL_001b: ldstr "Parallel computation results: %A"
        IL_0020: newobj instance void class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`5<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit, valuetype [System.Private.CoreLib]System.Int32[]>::.ctor(class [System.Private.CoreLib]System.String)
        IL_0025: stsfld class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit> '<StartupCode$_>.$_'::format@1
        IL_002a: call class [netstandard]System.IO.TextWriter [netstandard]System.Console::get_Out()
        IL_002f: call class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit> _/ParallelArrayProgramming::get_format@1()
        IL_0034: call !!0 [FSharp.Core]Microsoft.FSharp.Core.PrintfModule::PrintFormatLineToTextWriter<class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>>(class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.PrintfFormat`4<!!0, class [System.Private.CoreLib]System.IO.TextWriter, class [FSharp.Core]Microsoft.FSharp.Core.Unit, class [FSharp.Core]Microsoft.FSharp.Core.Unit>)
        IL_0039: call valuetype [System.Private.CoreLib]System.Int32[] _/ParallelArrayProgramming::computeResults()
        IL_003e: callvirt instance !1 class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<valuetype [System.Private.CoreLib]System.Int32[], class [FSharp.Core]Microsoft.FSharp.Core.Unit>::Invoke(!0)
        IL_0043: pop
        IL_0044: ret
    } // end of method $_::.cctor

} // end of class <StartupCode$_>.$_</code></pre>

## Machine Learning

And it's worthwhile to point out the growth in .NET machine learning projects, both to facilitate interop with other frameworks as well as purpose-built .NET workloads. The Apache Spark library is particularly notable that it works with either C# or F# *and* code can be deployed to Azure HDI, Amazon's Elastic MapReduce or Databricks. While .NET gets credit for "playing well with others" by being able to run on Mac and Linux, the transpile and interop story of .NET and particularly F# goes much further than that. While I discuss some F# specific tooling in sections below, these links provide a quick view into open source initiatives in the  machine learning community.

<div class="row">
  <div class="col-md-4 centered">`r blogdown::shortcode("ext-link-card", "https://github.com/fslaborg")`</div>
  <div class="col-md-4 centered">`r blogdown::shortcode("ext-link-card", "https://github.com/SciSharp")`</div>
</div>
<div class="row">
  <div class="col-md-4 centered">`r blogdown::shortcode("ext-link-card", "https://dotnet.microsoft.com/apps/machinelearning-ai/ml-dotnet")`</div>
  <div class="col-md-4 centered">`r blogdown::shortcode("ext-link-card", "https://dotnet.microsoft.com/apps/data/spark")`</div>
</div>

## An Overnight Success Ten Years in the Making

I really enjoyed watching these interviews with Don Syme, for the context as well as candor and humor he brings to the conversation. But I also liked the structure of the interview, where background info was displayed to "season" the screen as Don responded to questions.

<div class="row">
  <div class="col-md-6">`r blogdown::shortcode("youtube2", id = '"hNAb04V4liA"')`</div>
  <div class="col-md-6">`r blogdown::shortcode("youtube2", id = '"x4j7LQApfEY"')`</div>
</div>

It shows that F# may seem like a newcomer to certain fields, but that has more to do with *where* it can be deployed and the underpinnings supported by the .NET ecosystem more than F# itself. With .NET 6 Long Term Support and new tooling like .NET interactive, F# will compare favorably with a wide variety of general purpose and domain specific languages, which I expect will lead to broader adoption across the board.

## Kinesthetic Learning

There's no substitute for learning while doing. But I'm also a reader. So I set up a large music stand in my home office with several books perched on it which I've started to refer as my "F# bookshelf". I'm currently working through Isaac Abraham's "Get Programming with F#" but I will thumb through others for reference, and to occasionally provide a view into what's down the road. But the real work is sitting with the lessons and samples side-by-side in a working environment.

1. `r blogdown::shortcode("url-link", "Get Programming with F#", "https://www.manning.com/books/get-programming-with-f-sharp")` by Issac Abraham
1. `r blogdown::shortcode("url-link", "Machine Learning Projects for .NET Developers", "https://www.apress.com/gp/book/9781430267676")` by Matthais Brandewinder
1. `r blogdown::shortcode("url-link", "Expert F# 4.0", "https://www.apress.com/gp/book/9781484207413")` by Don Syme, et al
1. `r blogdown::shortcode("url-link", "Stylish F#", "https://www.apress.com/gp/book/9781484239995")` by Kit Eason
1. `r blogdown::shortcode("url-link", "Domain Modeling Made Functional", "https://pragprog.com/titles/swdddf/domain-modeling-made-functional/")` by Scott Wlaschin

`r blogdown::shortcode("fancybox", "/img", "music-stand.jpg")`

### Online Resources

Books often come with downloadable companion code - but there are also many, many free online resources that facilitate the curious programmer's journey.

1. `r blogdown::shortcode("url-link", "F# From the Ground Up", "https://www.udemy.com/course/fsharp-from-the-ground-up/")` (Kit Eason [Udemy paid courseware - highly recommended])
1. `r blogdown::shortcode("url-link", "F# for Fun and Profit", "https://fsharpforfunandprofit.com/")` (Scott Wlaschin's site)
1. `r blogdown::shortcode("url-link", "Compositional IT News & Blog", "https://www.compositional-it.com/news-blog/")` (company founded by Isaac Abraham)
1. `r blogdown::shortcode("url-link", "Learning F#", "https://fsharp.org/learn/")` (F# Foundation's compendium)
1. `r blogdown::shortcode("url-link", "Functional koans in F#", "https://github.com/ChrisMarinos/FSharpKoans")` (Chris Marinos on GitHub)

## Akka.NET, Actor Model and the Reactive Manifesto

This is where I'll get in trouble with both the mathematicians and the computer scientists. But my personal opinion is that serverless apps - both stateless and *durable* functions - are really a rehash of the actor model, which has been around for decades. I had some early brushes with the concept while in school, but it really sunk in when I started looking for ways to make operational systems more elastic and reactive. It turns out that I'm not alone in this, and actor model in Akka.NET (the name being an approved homage to the original java implementation) brings event-driven systems shoulder-to-shoulder with event sourced architectures. To many software engineers event *driven* and event *sourced* are distinct from one another, so it's worthwhile to consider each on their own before you find where they might overlap in a given domain.

Here are a pair of clips from a presentation by Aaron Stannard, co-creator of Akka.NET and CTO of `r blogdown::shortcode("url-link", "petabridge", "https://petabridge.com/")`. They cover a few highlights of the Akka.NET actor system.

<div class="row">
  <div class="col-md-6">`r blogdown::shortcode("youtube2", id = '"ozelpjr9SXE"', yt_start = '"1204"', yt_end = '"1526"')`</div>
  <div class="col-md-6">`r blogdown::shortcode("youtube2", id = '"ozelpjr9SXE"', yt_start = '"1792"', yt_end = '"1942"')`</div>
</div>

Actor systems are a form of orchestrated ephemeral compute that can very efficiently create a cohesive reactive application surface. There are many of these systems showing up across tech stacks well beyond public cloud serverless planes or Akka and Akka.NET. The `r blogdown::shortcode("url-link", "reactive manifesto", "https://www.reactivemanifesto.org/")` was authored in 2014 and serves as a common point of departure for many, is from my perspective is at least partly responsible for the renewed interest in the actor pattern. I count myself as both early *and* late to this party. Given the dilution that has happened to the agile manifesto, I'll be curious to see how ***this*** manifesto ages. While I think that in some ways it doesn't go far enough, I added my signature to show solidarity with its most high-minded goals.

The part of Akka.NET that really has my attention is that petabridge has provided `r blogdown::shortcode("url-link", "an entire site on learning how to implement Akka.NET step-by-step", "https://petabridge.com/bootcamp/")`, and it's ***free***. I'm definitely adding that my list of online learning resources. While it's written in and around C#, I'm looking forward to embracing it to take over to F# using Scott Wlaschin's "railway" pattern. I had a sense I would need to maintain and even sharpen my C# chops if I was going to take a deep dive into F#, and this is a prime example. From early on had a sense that leaning on R would only get me so far down the road, and the thought is pretty exciting to me.

## WildernessLabs Meadow and Xamarin

<div class="row">
  <div class="col-md-8">Et nulla eiusmod sit magna sit ut. Duis qui Lorem excepteur officia qui sunt Lorem nisi eu. Consectetur nulla qui aliquip occaecat laborum qui aliquip dolor officia ad et. Incididunt officia et proident aliquip irure minim occaecat cupidatat ex reprehenderit. Exercitation amet laborum cupidatat sint laborum ullamco anim adipisicing veniam nostrud magna duis fugiat enim. Enim excepteur sit ex nostrud sit ullamco. Incididunt laboris duis qui dolore reprehenderit. Aliquip exercitation anim ea mollit qui minim cupidatat incididunt cupidatat laborum enim. Eu dolore id incididunt est minim anim incididunt ad minim sunt elit sit. Excepteur ea mollit est minim proident labore do anim deserunt excepteur. Amet duis veniam proident excepteur dolore enim tempor tempor laboris duis velit. Tempor dolor fugiat officia ut reprehenderit.</div>
  <div class="col-md-4">`r blogdown::shortcode("fancybox", "/img", "meadow-project.jpg")`</div>
</div>

## Other Learning Projects

Aside from the exercises, kata, koan and other assorted bits and bytes, I'm also building a few of my own little projects to help sharpen my F# chops. My first project was an Azure Function app that takes a URL and retrieves openGraph data from the targeted web page. It's what I use to build the cards you see throughout this site. There are still some wrinkles to iron out, but for now I'm running the function in a local dev container, since I'm also building this site locally.

I'm also learning how to use `r blogdown::shortcode("url-link", "Snowflaqe", "https://github.com/Zaid-Ajaj/Snowflaqe")`, a meta-programming project from Zaid Ajaj. It's a fascinating micro-cosm into one of F#'s real super-powers - the code can be used to generate new, canonical code - so ***meta!*** I used it to generate a client that scraped GitHub's public GraphQL schema, and used that to generate all of the type interfaces for a client interface library. It's like magic. The purpose is to collect repository data, to satisfy my own curiosity about the relative growth of functional-friendly languages relative to other programming styles over the past 10 years. It's still early days but I'm hoping to complete the project end-to-end in F#/.NET and *not* fall back to R and C#.

But that's just the start. Right now the challenge is to maintain the core lessons (and the hardware project above) while not getting too distracted by the "new shiny" idea that pops into my head. It's the kind of problem I love to have.

## Everything Old Is New Again

<div class="row">
  <div class="col-md-4"><img src="/img/fsharp_ecosystem.png" alt="The F# ecosystem"></div>
  <div class="col-md-8">Et nulla eiusmod sit magna sit ut. Duis qui Lorem excepteur officia qui sunt Lorem nisi eu. Consectetur nulla qui aliquip occaecat laborum qui aliquip dolor officia ad et. Incididunt officia et proident aliquip irure minim occaecat cupidatat ex reprehenderit. Exercitation amet laborum cupidatat sint laborum ullamco anim adipisicing veniam nostrud magna duis fugiat enim. Enim excepteur sit ex nostrud sit ullamco. Incididunt laboris duis qui dolore reprehenderit. Aliquip exercitation anim ea mollit qui minim cupidatat incididunt cupidatat laborum enim. Eu dolore id incididunt est minim anim incididunt ad minim sunt elit sit. Excepteur ea mollit est minim proident labore do anim deserunt excepteur. Amet duis veniam proident excepteur dolore enim tempor tempor laboris duis velit. Tempor dolor fugiat officia ut reprehenderit.</div>
</div>

## Coda: Corporate and Open Source Balancing Act
