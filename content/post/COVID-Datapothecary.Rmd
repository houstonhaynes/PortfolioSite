---
title: "COVID-19 Datapothecary"
output:
  blogdown::html_page:
    toc: false
    toc_depth: 1
    fig_width: 8
    dev: "svg"
author: "Houston Haynes"
date: '2019-12-11T14:59:43+05:30'
featuredpath: img
featured: COVID_datapothecary.png
ogfeatured: H3_og_wide_COVID_datapothecary.png
description: Processing source data for a more robust result
draft: true
tags:
- R
- COVID-19
- MathJax
categories: 
- Deep Dive
editor_options: 
  chunk_output_type: inline
---
```{r setup and file loads, include=FALSE}
knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE
)


library(highcharter)
library(tidyverse)
library(lubridate)
library(widgetframe)
library(xts)
library(jsonlite)
library(fontawesome)

URL <- "https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/owid-covid-data.csv"

coviddata <- read.csv(URL)

```
# MathJax

$$(\frac{incidents}{population})\times{1,000,000}$$
<hr>
<div class="row">
  <div class="colxs-12>
```{r New Cases by Continent, echo=FALSE, message=FALSE, warning=FALSE, paged.print=FALSE  }
library(zoo)
library(slider)
library(DT)

pop <- read.csv("../../data/population_by_country_2020.csv", header = TRUE)
data <- select(coviddata[with(coviddata, order(date, iso_code)),], 
               date, continent, location, new_cases)   %>%
  filter(location != "International", location != "World") %>%
  mutate(new_cases = ifelse(is.na(new_cases), 0, new_cases)) %>%
  mutate(date = ymd(date)) %>%
  left_join(pop, location = location) %>%
  select(date, continent, new_cases, population) %>%
  mutate(ncpm = ((new_cases / population) * 1000000)) %>%
  select (date, continent, new_cases, population, ncpm) %>%
  group_by(date, continent) %>%
  summarize(new_cases = sum(new_cases), population = sum(population), ncpm = sum(ncpm)) %>%
  group_by(continent) %>%
  arrange(continent, date) %>%
  mutate(ncrm = slider::slide_dbl(new_cases, mean, .before = 3, .after = 3)) %>%
  mutate(ncpmrm = slider::slide_dbl(ncpm, mean, .before = 3, .after = 3)) %>%
  ungroup()

datatable(data)
```
  </div>
</div>
<hr>
$$
(\frac{7}{801})\times{1,000,000} = 8,739.07$$
<hr>
$$
\begin{aligned}
\LARGE\overline{p}_\text{SM} &= \LARGE\frac { \normalsize{p} \small{_M} \normalsize + p{ \small_M -1} + \cdots + p_{M \normalsize-(n-1)^{}}}{n}\\
                       &= \LARGE\frac1n \sum_{i=0}^{n-1} p_{ \small{M} \normalsize{-i}}
\end{aligned}
$$

